<section class="grid_18 alpha">

    <h2>"Strict" MAGE-TAB format for raw and processed microarray data matrix</h2>

    <p>This format allows each data point in the file to be mapped to a particular assay in the experiment, and to a particular probe/probe set in the
        array design file of your experiment. For the mapping to work smoothly, each matrix file should contain data from assays on a
        single array design (i.e if you use multiple array designs in your experiment, mutliple matrix files will be
        needed), and the column/row headings and the order of columns are strictly controlled:</p>

    <ul>
        <li><strong>Column/row headings:</strong>: The first header line of a matrix file, <code>Hybridization REF</code>,
            allows assay-mapping via assay names, which are automatically generated by Annotare and can be found in the
            <code>SDRF Preview</code> tab while you are preparing your submission. The second header row lists the
            "quantitation types" for each column (i.e. the type of measurement recorded in the column,
            e.g. <code>log2 ratio</code>). Finally, the first column, <code>Reporter REF</code> is used to map the data rows
            to probe identifiers from the array design file.</li>
        <br>
        <li><strong>Measurements calculated from multiple assays:</strong> Measurements such as Log2 fold-changes are often
            calculated from more than one assay (e.g. for every given gene, calculate the average of 3 knockout samples vs the
            average of 3 wild-type conotrols). In that case, you can put down multiple assay names per column, with the assay names
            separated by semi-colons:</li>
        <br>
        <table style="border: 1px solid black; border-collapse: collapse;">
            <tr>
                <td style="border: 1px solid black;"><strong>Hybridization REF</strong></td>
                <td style="border: 1px solid black;"><font color="blue">Hyb1;Hyb2;Hyb3</font></td>
                <td style="border: 1px solid black;"><font color="blue">Hyb4;Hyb5;Hyb6</font></td>
            </tr>
            <tr>
                <td style="border: 1px solid black;"><strong>Reporter REF</strong></td>
                <td style="border: 1px solid black;"><font color="blue">log2 FC</font></td>
                <td style="border: 1px solid black;"><font color="blue">log2 FC</font></td>
            </tr>
        </table>
        <br>

        <li><strong>Order of data columns</strong>:The format requires an ordered and regular organisation of the
            columns: first by assay, and then by quantitation type:</li>
        <h5>Correct</h5>
        <table style="border: 1px solid black; border-collapse: collapse;">
            <tr>
                <td style="border: 1px solid black;"><strong>Hybridization REF</strong></td>
                <td style="border: 1px solid black;"><font color="blue">Hyb1</font></td>
                <td style="border: 1px solid black;"><font color="blue">Hyb1</font></td>
                <td style="border: 1px solid black;"><font color="red">Hyb2</font></td>
                <td style="border: 1px solid black;"><font color="red">Hyb2</font></td>
            </tr>
            <tr>
                <td style="border: 1px solid black;"><strong>Reporter REF</strong></td>
                <td style="border: 1px solid black;"><font color="blue">log2 FC</font></td>
                <td style="border: 1px solid black;"><font color="red">p-value</font></td>
                <td style="border: 1px solid black;"><font color="blue">log2 FC</font></td>
                <td style="border: 1px solid black;"><font color="red">p-value</font></td>
            </tr>
        </table>

        <br>

        <h5>Wrong</h5>
        <table style="border: 1px solid black; border-collapse: collapse;">
            <tr>
                <td style="border: 1px solid black;"><strong>Hybridization REF</strong></td>
                <td style="border: 1px solid black;"><font color="blue">Hyb1</font></td>
                <td style="border: 1px solid black;"><font color="red">Hyb2</font></td>
                <td style="border: 1px solid black;"><font color="blue">Hyb1</font></td>
                <td style="border: 1px solid black;"><font color="red">Hyb2</font></td>
            </tr>
            <tr>
                <td style="border: 1px solid black;"><strong>Reporter REF</strong></td>
                <td style="border: 1px solid black;"><font color="blue">log2 FC</font></td>
                <td style="border: 1px solid black;"><font color="blue">log2 FC</font></td>
                <td style="border: 1px solid black;"><font color="red">p-value</font></td>
                <td style="border: 1px solid black;"><font color="red">p-value</font></td>
            </tr>
        </table>
    </ul>

    <p>&nbsp;</p>
    <h3>Example non-Affymetrix data matrix</h3>


    <p>
        In this example, four of the six assays (as shown in the SDRF preview) are being mapped to log2 ratio values in the matrix file.
        Each row of data is mapped to a Reporter Name defined in the
        <a href="/arrayexpress/help/creating_an_adf.html#WhatIsADF">array design file</a>, in this case,
        <a href="/arrayexpress/files/A-AGIL-6/A-AGIL-6.adf.txt">A-AGIL-6 (big file [4.2Mb])</a>.
    </p>
    <img src="../assets/images/nonaffy_datamatrix.png" alt="non Affymetrix data matrix" width=40%
         height=40% style='border:2px solid #385930'/>

    <p>&nbsp;</p>

    <h3>Example Affymetrix data matrix</h3>

    <p>
        In this example, two of the six assays (as shown in the SDRF preview) are being mapped to data with two
        different quantitation types (CELIntensity,	CELStdev). Each row of data is mapped to a CompositeElement Name
        (because each Affymetrix probe set is made up of a number of probes), defined in the
        <a href="/arrayexpress/help/creating_an_adf.html#WhatIsADF">array design file</a>,
        in this case, <a href="/arrayexpress/files/A-AFFY-44/A-AFFY-44.adf.txt">
        A-AFFY-44 (big file [4.3Mb])</a>.
    </p>
    <img src="../assets/images/affy_datamatrix.png" alt="Affymetrix data matrix" width=40%
         height=40% style='border:2px solid #385930'/>



    <p style="text-align: right;">
        <a href="#top" class="linktotop">Top</a>
    </p>
</section>
<aside class="grid_6 omega">
    <h3>Annotare Guide</h3>
    <ol id="secondary-nav">
        <li><h4>Getting started</h4>
            <ul>
                <li><a href="getting_started.html#register">Register for submission account</a></li>
                <li><a href="getting_started.html#start_new_sub">Start a new submission</a></li>
                <li><a href="getting_started.html#sub_status">Understand submission status</a></li>
            </ul>
        </li>
        <li><h4>Describe experiment</h4>
            <ul>
                <li><a href="describe_exp.html#expt_bg">Explain experiment background</a></li>
                <li><a href="describe_exp.html#release_date">Set reasonable release date</a></li>
                <li><a href="describe_exp.html#remain_anonymous">Enable anonymity</a></li>
                <li><a href="describe_exp.html#contact_citation">Provide contact details</a></li>
            </ul>
        </li>
        <li><h4>Time-saving features</h4>
            <ul>
                <li><a href="time_saving_features.html#fill_down_import">Fill-down and import values</a></li>
                <li><a href="time_saving_features.html#upload_multiple_files">Upload multiple files in one go</a></li>
            </ul>
        </li>
        <li><h4>Sample attributes</h4>
            <ul>
                <li><a href="sample_attributes.html#annotate">Annotate samples, nominate experimental variable(s)</a></li>
                <li><a href="sample_attributes.html#discrete_terms">Annotate with discrete terms</a></li>
                <li><a href="sample_attributes.html#protocols">Protocols</a></li>
            </ul>
        </li>
        <li><h4>Microarray experiment</h4>
            <ul>
                <li><a href="accepted_raw_ma_file_formats.html">Accepted raw file types</a></li>
                <li><a href="accepted_processed_ma_file_formats.html">Accepted processed file formats</a></li>
                <li><a href="two_color_ma.html">Two-colour experiments</a></li>
            </ul>
        </li>
        <li><h4>Sequencing experiment</h4>
            <ul>
                <li><a href="/arrayexpress/help/UHTS_submissions.html#DataTypes">Accepted data types</a></li>
                <li><a href="/arrayexpress/help/UHTS_submissions.html#HowToSubmit">How to prepare raw files</a></li>
                <li><a href="seq_lib_spec.html">Provide library information</a></li>
                <li><a href="/arrayexpress/help/UHTS_submissions.html#processed_data">Accepted processed file formats</a></li>
            </ul>
        </li>
        <li><h4>Upload files and assign to samples</h4>
            <ul>
                <li><a href="file_upload.html#direct">Direct upload</a></li>
                <li><a href="file_upload.html#ftp">FTP upload</a></li>
                <li><a href="assign_files.html">Assign files</a></li>
            </ul>
        </li>
        <li><h4>Validate and submit</h4>
            <ul>
                <li><a href="validate_exp.html#validate">What is validation?</a></li>
                <li><a href="validate_exp.html#fix_errors">How to fix validation errors?</a></li>
                <li><a href="submit_exp.html">Submit, and what happens next?</a></li>
            </ul>
        </li>
    </ol>
</aside>
