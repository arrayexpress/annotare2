package uk.ac.ebi.fg.annotare2.db.dao.impl;import com.google.inject.Inject;import uk.ac.ebi.fg.annotare2.db.dao.SubmissionExceptionDao;import uk.ac.ebi.fg.annotare2.db.model.Submission;import uk.ac.ebi.fg.annotare2.db.model.SubmissionException;import uk.ac.ebi.fg.annotare2.db.util.HibernateSessionFactory;import java.io.PrintWriter;import java.io.StringWriter;import java.time.LocalDateTime;public class SubmissionExceptionDaoImpl extends AbstractDaoImpl<SubmissionException> implements SubmissionExceptionDao {    @Inject    public SubmissionExceptionDaoImpl(HibernateSessionFactory sessionFactory) {        super(sessionFactory);    }    @Override    public SubmissionException logExceptioninDB(Submission submission, Exception e) {        SubmissionException exception = new SubmissionException();        exception.setSubmission(submission);        exception.setExceptionMessage(e.getMessage());        exception.setExceptionStackTrace(getStackTraceString(e));        exception.setCreated(LocalDateTime.now());        exception.setFixed(false);        save(exception);        return exception;    }    private String getStackTraceString(Exception e) {        StringWriter sw = new StringWriter();        try(PrintWriter pw = new PrintWriter(sw)){            e.printStackTrace(pw);            return sw.toString();        }    }}